"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{2441:function(e,t,s){s.d(t,{Z:function(){return Layout}});var o=s(5893),n=s(7294),r=s(1664),a=s.n(r),i=s(1163);function Header(){let[e,t]=(0,n.useState)(!1),s=(0,i.useRouter)(),toggleMenu=()=>{t(!e)},isActive=e=>s.pathname===e?"text-ptv-blue font-semibold":"text-gray-700 hover:text-ptv-blue";return(0,o.jsx)("header",{className:"bg-white shadow-sm",children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)(a(),{href:"/",className:"flex items-center space-x-2",children:(0,o.jsx)("span",{className:"text-xl font-bold text-ptv-blue",children:"PTV-LML"})}),(0,o.jsx)("button",{className:"md:hidden p-2 rounded-md text-gray-700 hover:bg-gray-100 focus:outline-none",onClick:toggleMenu,"aria-label":"Toggle menu",children:(0,o.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e?(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,o.jsxs)("nav",{className:"hidden md:flex space-x-8",children:[(0,o.jsx)(a(),{href:"/",className:"".concat(isActive("/")," transition-colors"),children:"Home"}),(0,o.jsx)(a(),{href:"/routes",className:"".concat(isActive("/routes")," transition-colors"),children:"Routes"}),(0,o.jsx)(a(),{href:"/allgigs",className:"".concat(isActive("/allgigs")," transition-colors"),children:"Live Music"}),(0,o.jsx)(a(),{href:"/about",className:"".concat(isActive("/about")," transition-colors"),children:"About"})]})]}),e&&(0,o.jsx)("nav",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:(0,o.jsxs)("ul",{className:"space-y-4",children:[(0,o.jsx)("li",{children:(0,o.jsx)(a(),{href:"/",className:"".concat(isActive("/")," block py-2"),onClick:toggleMenu,children:"Home"})}),(0,o.jsx)("li",{children:(0,o.jsx)(a(),{href:"/routes",className:"".concat(isActive("/routes")," block py-2"),onClick:toggleMenu,children:"Routes"})}),(0,o.jsx)("li",{children:(0,o.jsx)(a(),{href:"/allgigs",className:"".concat(isActive("/allgigs")," block py-2"),onClick:toggleMenu,children:"Live Music"})}),(0,o.jsx)("li",{children:(0,o.jsx)(a(),{href:"/about",className:"".concat(isActive("/about")," block py-2"),onClick:toggleMenu,children:"About"})})]})})]})})}var l=s(5675),c=s.n(l);function Footer(){let e=new Date().getFullYear();return(0,o.jsx)("footer",{className:"bg-gray-800 text-white py-8",children:(0,o.jsxs)("div",{className:"container mx-auto px-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center mb-4",children:[(0,o.jsx)(c(),{src:"/images/LML_1_RGB.png",alt:"Live Music Locator Logo",width:80,height:80,className:"mr-3"}),(0,o.jsx)("h3",{className:"text-lg font-semibold",children:"PTV-LML"})]}),(0,o.jsx)("p",{className:"text-gray-300 text-sm",children:"A web application that displays Public Transport Victoria route information (including SkyBus) and integrates with live music gig data."}),(0,o.jsx)("p",{className:"text-gray-300 text-sm mt-2",children:(0,o.jsx)("a",{href:"http://lml.live",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Powered by Live Music Locator technology"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),(0,o.jsxs)("ul",{className:"space-y-2 text-gray-300 text-sm",children:[(0,o.jsx)("li",{children:(0,o.jsx)(a(),{href:"/",className:"hover:text-white transition-colors",children:"Home"})}),(0,o.jsx)("li",{children:(0,o.jsx)(a(),{href:"/routes",className:"hover:text-white transition-colors",children:"Routes"})}),(0,o.jsx)("li",{children:(0,o.jsx)(a(),{href:"/allgigs",className:"hover:text-white transition-colors",children:"Live Music"})}),(0,o.jsx)("li",{children:(0,o.jsx)(a(),{href:"/about",className:"hover:text-white transition-colors",children:"About"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"External Resources"}),(0,o.jsxs)("ul",{className:"space-y-2 text-gray-300 text-sm",children:[(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"https://www.ptv.vic.gov.au/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"PTV Official Website"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"https://www.ptv.vic.gov.au/footer/data-and-reporting/datasets/ptv-timetable-api/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"PTV API Documentation"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"http://lml.live",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"Live Music Locator"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"https://github.com/yourusername/ptv-lml",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"GitHub Repository"})})]})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-700 mt-8 pt-6 text-center text-sm text-gray-400",children:[(0,o.jsxs)("p",{children:["\xa9 ",e," PTV-LML. All rights reserved."]}),(0,o.jsxs)("p",{className:"mt-2",children:["PTV data is used under ",(0,o.jsx)("a",{href:"https://www.ptv.vic.gov.au/footer/data-and-reporting/datasets/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"Creative Commons Attribution 4.0 International license"}),"."]}),(0,o.jsx)("p",{className:"mt-2",children:"This is an unofficial application and is not affiliated with Public Transport Victoria."}),(0,o.jsxs)("p",{className:"mt-2",children:["Live Music Locator technology used with permission. Visit ",(0,o.jsx)("a",{href:"http://lml.live",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"lml.live"})," for more information."]})]})]})})}function Layout(e){let{children:t}=e;return(0,o.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,o.jsx)(Header,{}),(0,o.jsx)("main",{className:"flex-grow",children:t}),(0,o.jsx)(Footer,{})]})}},1643:function(e,t,s){s.d(t,{E:function(){return findGigsNearLocation},l2:function(){return isGigReachable},ow:function(){return getTodaysGigs},xc:function(){return findGigsNearMultipleLocations}});var o=s(7066);let LMLApiError=class LMLApiError extends Error{constructor(e,t){super(e),this.name="LMLApiError",this.status=t}};async function lmlApiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("LML API Request - Endpoint: ".concat(e));let s=new URLSearchParams;Object.entries(t).forEach(e=>{let[t,o]=e;s.append(t,String(o))});let n="".concat("https://api.lml.live").concat(e).concat(Object.keys(t).length>0?"?"+s.toString():"");console.log("Full API URL: ".concat(n));try{console.log("Sending API request...");let e=await o.Z.get(n);return console.log("API Response received:",{status:e.status,statusText:e.statusText,dataSize:JSON.stringify(e.data).length}),e.data}catch(e){if(console.error("LML API Request failed:",e),o.Z.isAxiosError(e)){var r,a,i,l,c,d;if(console.error("Axios Error Details:",{status:null===(r=e.response)||void 0===r?void 0:r.status,statusText:null===(a=e.response)||void 0===a?void 0:a.statusText,data:null===(i=e.response)||void 0===i?void 0:i.data,message:e.message,config:{url:null===(l=e.config)||void 0===l?void 0:l.url,method:null===(c=e.config)||void 0===c?void 0:c.method,headers:null===(d=e.config)||void 0===d?void 0:d.headers}}),e.response)throw new LMLApiError("LML API error: ".concat(e.response.status," ").concat(e.response.statusText),e.response.status)}throw Error("LML API request failed: ".concat(e instanceof Error?e.message:String(e)))}}async function getTodaysGigs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"melbourne";console.log("Getting today's gigs for location: ".concat(e));let t=new Date().toISOString().split("T")[0];console.log("Today's date: ".concat(t));try{console.log("Making API request to /gigs/query with params:",{location:e,date_from:t,date_to:t});let s=await lmlApiRequest("/gigs/query",{location:e,date_from:t,date_to:t});return console.log("Received ".concat(s.length," gigs from API")),s.length>0&&console.log("Sample gig:",{id:s[0].id,name:s[0].name,venue:s[0].venue.name,hasCoordinates:void 0!==s[0].venue.latitude&&void 0!==s[0].venue.longitude}),s}catch(e){return console.error("Error in getTodaysGigs:",e),e instanceof Error&&console.error("Error details:",{name:e.name,message:e.message,stack:e.stack}),[]}}function calculateDistance(e,t,s,o){let n=(s-e)*(Math.PI/180),r=(o-t)*(Math.PI/180),a=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*(Math.PI/180))*Math.cos(s*(Math.PI/180))*Math.sin(r/2)*Math.sin(r/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}async function findGigsNearLocation(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;console.log("Finding gigs near location: lat=".concat(e,", lon=").concat(t,", maxDistance=").concat(s,"m"));try{console.log("Fetching today's gigs...");let o=await getTodaysGigs();console.log("Fetched ".concat(o.length," gigs for today")),console.log("Calculating distances and filtering by proximity...");let n=o.map(s=>{let o=calculateDistance(e,t,s.venue.latitude,s.venue.longitude);return{...s,distance_meters:o}}),r=n.filter(e=>e.distance_meters<=s).sort((e,t)=>(e.distance_meters||0)-(t.distance_meters||0));return console.log("Found ".concat(r.length," gigs within ").concat(s,"m")),r.length>0&&console.log("First nearby gig:",{name:r[0].name,venue:r[0].venue.name,distance:Math.round(r[0].distance_meters||0)}),r}catch(e){throw console.error("Error in findGigsNearLocation:",e),e instanceof Error&&console.error("Error details:",{name:e.name,message:e.message,stack:e.stack}),e}}async function findGigsNearMultipleLocations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;console.log("Finding gigs near ".concat(e.length," locations"));try{let s=await getTodaysGigs();console.log("Fetched ".concat(s.length," gigs for today"));let o=[];for(let n of e){let e=s.map(e=>{let t=calculateDistance(n.latitude,n.longitude,e.venue.latitude,e.venue.longitude);return{...e,distance_meters:t,stopId:n.stopId,stopName:n.stopName,stopSequence:n.stopSequence}}),r=e.filter(e=>e.distance_meters<=t);o.push(...r)}let n=o.sort((e,t)=>e.stopSequence!==t.stopSequence?e.stopSequence-t.stopSequence:(e.distance_meters||0)-(t.distance_meters||0));return console.log("Found ".concat(n.length," gigs near ").concat(e.length," locations")),n}catch(e){throw console.error("Error in findGigsNearMultipleLocations:",e),e instanceof Error&&console.error("Error details:",{name:e.name,message:e.message,stack:e.stack}),e}}function isGigReachable(e,t,s){let o=new Date(e),n=new Date(t);console.log("Checking reachability for gig at ".concat(o.toISOString())),console.log("Current time: ".concat(n.toISOString())),console.log("Travel time: ".concat(s," minutes"));let r=new Date(o.getTime()+(s+180)*6e4);return console.log("Gig end time with buffer: ".concat(r.toISOString())),console.log("Is gig still reachable: ".concat(n<r)),n<r}}}]);