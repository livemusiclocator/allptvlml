(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{6182:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/allgigs",function(){return s(1590)}])},1590:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return AllGigs}});var r=s(5893),t=s(7294),a=s(9008),n=s.n(a),i=s(1664),c=s.n(i),o=s(2441),d=s(1643);function AllGigs(){let[e,l]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[i,u]=(0,t.useState)(null),[m,x]=(0,t.useState)(""),[g,h]=(0,t.useState)(null);(0,t.useEffect)(()=>{let fetchGigs=async()=>{try{a(!0),u(null);let e=localStorage.getItem("all_gigs");if(e){let s=JSON.parse(e);l(s.gigs),a(!1);let r=localStorage.getItem("all_gigs_timestamp");r&&Date.now()-parseInt(r)>36e5&&refreshGigs();return}await refreshGigs()}catch(e){u("Failed to load gigs. Please try again later."),a(!1),console.error("Error fetching gigs:",e)}},refreshGigs=async()=>{let e=await (0,d.ow)();l(e),a(!1),localStorage.setItem("all_gigs",JSON.stringify({gigs:e})),localStorage.setItem("all_gigs_timestamp",Date.now().toString())};fetchGigs()},[]);let p=Array.from(new Set(e.flatMap(e=>e.genre_tags))).sort(),v=e.filter(e=>{let l=e.name.toLowerCase().includes(m.toLowerCase())||e.venue.name.toLowerCase().includes(m.toLowerCase()),s=!g||e.genre_tags.includes(g);return l&&s}),formatTime=e=>{if(!e)return"Time TBA";try{let[l,s]=e.split(":"),r=parseInt(l,10);return"".concat(r%12||12,":").concat(s," ").concat(r>=12?"PM":"AM")}catch(l){return e}};return(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"PTV-LML | Live Music Events"})}),(0,r.jsxs)("div",{className:"container py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(c(),{href:"/",className:"text-ptv-blue hover:underline mb-4 inline-flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-music-purple mb-2 md:text-4xl",children:"Live Music Events"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Discover today's live music events in Melbourne."})]}),(0,r.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-grow",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search events or venues...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-music-purple",value:m,onChange:e=>x(e.target.value)}),(0,r.jsx)("svg",{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})]}),(0,r.jsx)("div",{className:"md:w-64",children:(0,r.jsxs)("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-music-purple",value:g||"",onChange:e=>h(e.target.value||null),children:[(0,r.jsx)("option",{value:"",children:"All Genres"}),p.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})})]}),s?(0,r.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-music-purple"})}):i?(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,r.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,r.jsxs)("span",{className:"block sm:inline",children:[" ",i]})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.length>0?v.map(e=>(0,r.jsx)("div",{className:"card hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:e.name}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-600 mb-1",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-music-purple",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),(0,r.jsx)("span",{children:e.venue.name})]}),(0,r.jsxs)("div",{className:"flex items-center text-gray-600 mb-1",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-music-purple",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),(0,r.jsx)("span",{children:new Date(e.date).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})})]}),(0,r.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-music-purple",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),(0,r.jsx)("span",{children:formatTime(e.start_time)})]})]}),e.genre_tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genre_tags.map(e=>(0,r.jsx)("span",{className:"bg-purple-100 text-music-purple px-2 py-1 rounded-md text-xs font-medium",onClick:()=>h(e),children:e},e))}),e.venue.website&&(0,r.jsxs)("a",{href:e.venue.website,target:"_blank",rel:"noopener noreferrer",className:"text-music-purple hover:underline text-sm inline-flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z",clipRule:"evenodd"})}),"Venue Website"]})]})},e.id)):(0,r.jsxs)("div",{className:"col-span-full text-center py-8",children:[(0,r.jsx)("p",{className:"text-gray-500",children:"No events found matching your criteria."}),(0,r.jsx)("button",{className:"mt-4 text-music-purple hover:underline",onClick:()=>{x(""),h(null)},children:"Clear filters"})]})})]})]})}}},function(e){e.O(0,[664,675,66,910,774,888,179],function(){return e(e.s=6182)}),_N_E=e.O()}]);